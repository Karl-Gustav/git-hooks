#!/usr/bin/python

import sys
from subprocess import check_output as cmd

arguments = sys.argv

if len(arguments) == 3:
    script, remoteName, remoteUr  = arguments
else:
    sys.exit(0)
currentBranch = cmd('git symbolic-ref HEAD'.split()).strip()
dangerousBranches = [
    'refs/heads/develop',
    'refs/heads/pilot',
    'refs/heads/master'
]

if currentBranch in dangerousBranches:
    sys.stdin = open('/dev/tty')
    confirm = raw_input('Are you sure you want to push %s? [y/N] ' % currentBranch)
    if confirm.strip().lower().startswith('y'):
        sys.exit(0)
    else:
        sys.exit(1)
